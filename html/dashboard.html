<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>TABI - DASHBOARD OPERACIONAL</title>
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/dashboard.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <div class="brand">
        <div class="logo">T</div>
        <div class="brand-text">
          <div class="title">TABI - DASHBOARD OPERACIONAL</div>
          <div class="subtitle">Vis√£o em Tempo Real - HE e Opera√ß√µes</div>
        </div>
      </div>
      <div id="clock"></div>
    </div>
  </header>

  <main class="container dashboard-layout">
    <section class="card gradient-card page-intro">
      <div class="intro-content">
        <div>
          <h2>Vis√£o Integrada de Horas Extras</h2>
          <p>Conecte planejamento e supervis√£o para antecipar decis√µes sobre libera√ß√£o de HE, cobertura de turnos e performance das opera√ß√µes.</p>
        </div>
        <div class="intro-metric">
          <span class="intro-label">Meta semanal planejada</span>
          <strong>12.480 min</strong>
          <small>Planejamento | Atualizado 08h00</small>
        </div>
      </div>
    </section>

    <!-- Filtros -->
    <div class="card filter-card">
      <div class="card-header">
        <h3 class="card-title">Filtros do Dashboard</h3>
      </div>
      <div class="dashboard-filter-row form-row">
        <div class="form-group">
          <label for="d_start">Data In√≠cio</label>
          <input type="date" id="d_start">
        </div>
        <div class="form-group">
          <label for="d_end">Data Fim</label>
          <input type="date" id="d_end">
        </div>
        <div class="form-group">
          <label for="d_operation">Opera√ß√£o</label>
          <select id="d_operation">
            <option value="">Todas</option>
            <option>TIM</option>
            <option>VIVO</option>
            <option>CLARO</option>
          </select>
        </div>
        <div class="form-group">
          <label for="d_segment">Segmento</label>
          <select id="d_segment">
            <option value="">Todos</option>
            <option>CONTROLE FRONT MOC</option>
            <option>CONTROLE GRE BH</option>
            <option>PR√â PAGO ESE BH</option>
            <option>LABS LAB</option>
          </select>
        </div>
        <div class="form-group filter-actions">
          <button class="btn btn-primary" id="btnApplyDash">Aplicar Filtros</button>
          <button class="btn btn-secondary" id="btnClearDash">Limpar</button>
          <button class="btn btn-warning" id="btnLoadDemo">Carregar Demo</button>
        </div>
      </div>
    </div>

    <!-- Conte√∫do Principal -->
    <div id="dashboard-content" class="dashboard-shell" style="display:none">
      <div class="layout-grid">
        <section class="layout-main">
          <div class="card executive-brief">
            <div class="card-header">
              <h3>Resumo Integrado Planejamento x Supervis√£o</h3>
              <span class="badge badge-positive">Atualizado em tempo real</span>
            </div>
            <div class="brief-grid">
              <div class="brief-item">
                <span class="brief-label">Planejado no per√≠odo</span>
                <strong id="brief-planejado">0h</strong>
                <small>Origem: Planejamento Operacional</small>
              </div>
              <div class="brief-item">
                <span class="brief-label">Liberado pela supervis√£o</span>
                <strong id="brief-liberado">0h</strong>
                <small>Distribu√≠do na aba do Supervisor</small>
              </div>
              <div class="brief-item accent">
                <span class="brief-label">Gap operacional</span>
                <strong id="brief-gap">0h</strong>
                <small>HE ainda n√£o coberta</small>
              </div>
              <div class="brief-item neutral">
                <span class="brief-label">Colaboradores ativos</span>
                <strong id="brief-colaboradores">0</strong>
                <small>Times envolvidos em HE</small>
              </div>
            </div>
          </div>

          <!-- KPIs -->
          <div class="kpi-grid">
            <div class="kpi-card">
              <div class="kpi-icon">‚è±Ô∏è</div>
              <div class="kpi-content">
                <div class="kpi-value" id="kpi-total-he">0h</div>
                <div class="kpi-label">HE Total Planejada</div>
                <div class="kpi-meta">
                  <span class="kpi-trend positive">+6% vs semana anterior</span>
                  <span class="kpi-subtext">Planejamento oficial</span>
                </div>
              </div>
            </div>
            <div class="kpi-card">
              <div class="kpi-icon">üë•</div>
              <div class="kpi-content">
                <div class="kpi-value" id="kpi-colaboradores">0</div>
                <div class="kpi-label">Colaboradores com HE</div>
                <div class="kpi-meta">
                  <span class="kpi-trend neutral">Equipe distribu√≠da</span>
                  <span class="kpi-subtext">Supervis√£o em acompanhamento</span>
                </div>
              </div>
            </div>
            <div class="kpi-card">
              <div class="kpi-icon">‚úÖ</div>
              <div class="kpi-content">
                <div class="kpi-value" id="kpi-taxa-conversao">0%</div>
                <div class="kpi-label">Taxa de Convers√£o</div>
                <div class="kpi-meta">
                  <span class="kpi-trend positive">Meta: 92%</span>
                  <span class="kpi-subtext">Planejado x Liberado</span>
                </div>
              </div>
            </div>
            <div class="kpi-card">
              <div class="kpi-icon">üìà</div>
              <div class="kpi-content">
                <div class="kpi-value" id="kpi-efficiency">0%</div>
                <div class="kpi-label">Efici√™ncia Operacional</div>
                <div class="kpi-meta">
                  <span class="kpi-trend positive">Alavanca de produtividade</span>
                  <span class="kpi-subtext">Dados do Supervisor</span>
                </div>
              </div>
            </div>
          </div>

          <div class="card insight-group">
            <div class="card-header">
              <h3>Insights R√°pidos</h3>
              <span class="badge badge-neutral">Consolidados 24h</span>
            </div>
            <div class="insights-grid">
              <article class="insight-card">
                <header class="insight-header">
                  <span class="insight-icon">üß≠</span>
                  <div>
                    <h4>Prioridades do Planejamento</h4>
                    <small>Distribui√ß√£o oficial do per√≠odo</small>
                  </div>
                </header>
                <div class="insight-body">
                  <ul class="trend-list">
                    <li class="trend-item">
                      <strong>Turno Manh√£</strong>
                      <span class="trend-meta">42% das horas semanais</span>
                    </li>
                    <li class="trend-item">
                      <strong>Opera√ß√£o VIVO</strong>
                      <span class="trend-meta">+280 min em rela√ß√£o ao plano</span>
                    </li>
                    <li class="trend-item">
                      <strong>Backoffice TIM</strong>
                      <span class="trend-meta">Reserva de conting√™ncia ativa</span>
                    </li>
                  </ul>
                </div>
              </article>
              <article class="insight-card highlight">
                <header class="insight-header">
                  <span class="insight-icon">üéØ</span>
                  <div>
                    <h4>Atua√ß√£o do Supervisor</h4>
                    <small>Dados consolidados da aba Supervisor</small>
                  </div>
                </header>
                <div class="insight-body">
                  <p><strong id="insight-liberado">0h</strong> liberadas nas √∫ltimas 24h, com prioridade para <span class="highlight-text">CONTROLE FRONT MOC</span> e refor√ßo do plant√£o noturno.</p>
                  <p>Escala ajustada para absorver <strong id="insight-gap">0h</strong> remanescentes sem comprometer o SLA.</p>
                </div>
                <footer class="insight-footer">
                  <span class="badge badge-positive">Sem alertas cr√≠ticos</span>
                  <span class="badge badge-accent">Monitorar ades√£o noturna</span>
                </footer>
              </article>
            </div>
          </div>

          <!-- Gr√°ficos -->
          <div class="charts-grid">
            <div class="chart-card full-width">
              <div class="chart-header">
                <h3>Distribui√ß√£o de HE por Segmento</h3>
              </div>
              <div class="chart-container">
                <canvas id="chart_he_segmento"></canvas>
              </div>
            </div>

            <div class="chart-card">
              <div class="chart-header">
                <h3>Evolu√ß√£o Di√°ria - HE</h3>
              </div>
              <div class="chart-container">
                <canvas id="chart_evolucao_diaria"></canvas>
              </div>
            </div>

            <div class="chart-card">
              <div class="chart-header">
                <h3>Picos de Chamadas por Turno</h3>
              </div>
              <div class="chart-container">
                <canvas id="chart_picos_chamadas"></canvas>
              </div>
            </div>

            <div class="chart-card">
              <div class="chart-header">
                <h3>Status de Atribui√ß√£o</h3>
              </div>
              <div class="chart-container">
                <canvas id="chart_status_atribuicao"></canvas>
              </div>
            </div>
          </div>

          <!-- Tabela -->
          <div class="card table-card">
            <div class="card-header">
              <h3>Detalhamento por Colaborador</h3>
              <span class="badge badge-neutral">Ordenado por HE realizada</span>
            </div>
            <div class="table-container">
              <table class="data-table" id="table-detalhes">
                <thead>
                  <tr>
                    <th>Colaborador</th>
                    <th>Matr√≠cula</th>
                    <th>HE Atribu√≠da</th>
                    <th>HE Realizada</th>
                    <th>Diferen√ßa</th>
                    <th>Efici√™ncia</th>
                    <th>Status</th>
                  </tr>
                </thead>
                <tbody id="table-detalhes-body">
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <aside class="layout-sidebar">
          <div class="sidebar-card gradient-card">
            <div class="sidebar-header">
              <h3>Radar Operacional</h3>
              <span class="badge badge-accent">Live</span>
            </div>
            <div class="progress-group">
              <div class="progress-item">
                <div class="progress-label">
                  <span>Convers√£o do Planejamento</span>
                  <strong id="sidebar-conversao">0%</strong>
                </div>
                <div class="progress-track">
                  <div class="progress-value" id="progress-conversao"></div>
                </div>
              </div>
              <div class="progress-item">
                <div class="progress-label">
                  <span>Efici√™ncia Supervis√£o</span>
                  <strong id="sidebar-eficiencia">0%</strong>
                </div>
                <div class="progress-track">
                  <div class="progress-value" id="progress-eficiencia"></div>
                </div>
              </div>
              <div class="progress-item">
                <div class="progress-label">
                  <span>Gap a Cobrir</span>
                  <strong id="sidebar-gap">0h</strong>
                </div>
                <div class="progress-track">
                  <div class="progress-value" id="progress-gap"></div>
                </div>
              </div>
            </div>
            <ul class="sidebar-stats">
              <li>
                <span>HE Planejada</span>
                <strong id="sidebar-he-planejada">0h</strong>
              </li>
              <li>
                <span>HE Liberada</span>
                <strong id="sidebar-he-liberada">0h</strong>
              </li>
              <li>
                <span>HE Realizada</span>
                <strong id="sidebar-he-realizada">0h</strong>
              </li>
            </ul>
          </div>

          <div class="sidebar-card">
            <div class="sidebar-header">
              <h3>Alertas da Supervis√£o</h3>
              <span class="badge badge-warning">2 recomenda√ß√µes</span>
            </div>
            <ul class="alert-list">
              <li>
                <span class="alert-title">Conferir ades√£o do turno da noite</span>
                <small>Monitorar ader√™ncia dos √∫ltimos 3 dias</small>
              </li>
              <li>
                <span class="alert-title">Liberar refor√ßo para Backoffice</span>
                <small>Gatilho autom√°tico ap√≥s 22h</small>
              </li>
            </ul>
          </div>

          <div class="sidebar-card">
            <div class="sidebar-header">
              <h3>Escala em Destaque</h3>
              <span class="badge badge-neutral">Pr√≥ximas 12h</span>
            </div>
            <ul class="schedule-list">
              <li>
                <div>
                  <strong>CONTROLE FRONT MOC</strong>
                  <small>Supervisor: Ana Souza</small>
                </div>
                <span class="badge badge-positive">Cobertura OK</span>
              </li>
              <li>
                <div>
                  <strong>PR√â PAGO ESE BH</strong>
                  <small>Supervisor: Lucas Prado</small>
                </div>
                <span class="badge badge-warning">Refor√ßo solicitado</span>
              </li>
              <li>
                <div>
                  <strong>LABS LAB</strong>
                  <small>Supervisor: Juliana Lima</small>
                </div>
                <span class="badge badge-neutral">Em monitoramento</span>
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>

    <!-- Estado Vazio -->
    <div id="dashboard-empty" class="card empty-state">
      <div class="empty-state-icon">üìä</div>
      <div class="empty-state-text">Dashboard Operacional</div>
      <div class="empty-state-subtext">Aplique os filtros ou carregue dados de demonstra√ß√£o para visualizar</div>
    </div>
  </main>

  <script type="module" src="js/common.js"></script>
  <script type="module" src="js/dashboard.js"></script>
</body>
</html>
